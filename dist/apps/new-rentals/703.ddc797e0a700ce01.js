"use strict";(self.webpackChunknew_rentals=self.webpackChunknew_rentals||[]).push([[703],{63703:(fe,A,l)=>{l.r(A),l.d(A,{MaintenanceModule:()=>de});var M=l(36895),R=l(97577),e=l(94650),E=l(19132);let z=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["new-rentals-maintenance"]],decls:1,vars:0,template:function(t,a){1&t&&e.\u0275\u0275element(0,"router-outlet")},dependencies:[E.lC],encapsulation:2}),n})();var j=l(69814),h=l(97392),g=l(41206),b=l(284),C=l(84385),x=l(4859),c=l(7274),w=l(42673),I=l(3848),s=l(28255),L=l(77331),o=l(24006),m=l(25939);let H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[M.ez,E.Bz,j.o9,h.Ps,g._t,b.c,C.LD,x.ot,c.Is,w.g,I.Nh,s.Tx,L.Hi,o.UX,m.m8]}),n})();var k=l(70655),p=l(1576);let q=(()=>{class n{constructor(t){this.dialogRef=t}ngOnInit(){}closeDialog(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(c.so))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["new-rentals-maintenance-detail-modal"]],decls:59,vars:2,consts:[["fxLayout","column","fxLayoutAlign","space-between",1,"chat-modal"],["fxFlex","90"],["label","Application Details"],["fxLayout","row","fxLayoutAlign","space-between center",1,"my-20"],["fxLayout","row"],[1,"primary-bg","br-4","nr-white-color","mr-4"],[1,"primary-bg","p-4","br-4","hand-cursor","nr-white-color","mt-4",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item",""],["fxLayoutAlign","center center",1,"light-yellow","br-4","py-4","px-16"],["fxLayoutAlign","space-between"],[1,"mb-0"],[1,"nr-black-color"],["fxFlex","30"],[1,"nr-white-fade-bg","br-4","px-16","py-8","my-20"],[1,"mb-8"],["fxLayoutAlign","start center",1,"mb-0"],["src","../assets/images/user.svg",1,"user-profile","mr-8"],["label","Messages"],["fxLayoutAlign","end",1,"m-16"],[1,"full-width","mb-20"],["mat-button","","mat-stroked-button","","color","primary",1,"primary-border","mr-12",3,"click"]],template:function(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"mat-dialog-content",1)(2,"mat-tab-group")(3,"mat-tab",2)(4,"div",3)(5,"div",4)(6,"mat-chip-set")(7,"mat-chip",5),e.\u0275\u0275text(8," Status: Open "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"mat-icon",6)(10,"mat-icon"),e.\u0275\u0275text(11,"expand_more"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"mat-menu",null,7)(14,"button",8),e.\u0275\u0275text(15,"on hold"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"button",8),e.\u0275\u0275text(17,"In Progress"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"span",9),e.\u0275\u0275text(19,"Priority: Medium"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"h2"),e.\u0275\u0275text(21,"Kitchen sync Blockage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"p"),e.\u0275\u0275text(23,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci aspernatur eaque minus numquam similique totam? Assumenda dicta rem saepe. Veniam."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",10)(25,"div")(26,"p",11),e.\u0275\u0275text(27,"Category:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"p",12),e.\u0275\u0275text(29,"Planned"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",13)(31,"p",11),e.\u0275\u0275text(32,"Requested ID:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"p",12),e.\u0275\u0275text(34,"1"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(35,"div",10)(36,"div")(37,"p",11),e.\u0275\u0275text(38,"Created On:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"p",12),e.\u0275\u0275text(40,"1 puppy"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"div",13)(42,"p",11),e.\u0275\u0275text(43,"Last Updated On:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"p",12),e.\u0275\u0275text(45,"11-23-22"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(46,"div",14)(47,"p",15),e.\u0275\u0275text(48,"Requested By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"p",16),e.\u0275\u0275element(50,"img",17),e.\u0275\u0275text(51," Cristina "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(52,"div"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"mat-tab",18),e.\u0275\u0275text(54," Discussion Working on"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(55,"mat-dialog-actions",19),e.\u0275\u0275element(56,"hr",20),e.\u0275\u0275elementStart(57,"button",21),e.\u0275\u0275listener("click",function(){return a.closeDialog()}),e.\u0275\u0275text(58),e.\u0275\u0275elementEnd()()()),2&t){const r=e.\u0275\u0275reference(13);e.\u0275\u0275advance(9),e.\u0275\u0275property("matMenuTriggerFor",r),e.\u0275\u0275advance(49),e.\u0275\u0275textInterpolate("Close")}},dependencies:[p.xw,p.Wh,p.yH,h.Hw,x.lW,c.xY,c.H8,I.uX,I.SP,s.VK,s.OP,s.p6,L.HS,L.J4],styles:[".chat-modal[_ngcontent-%COMP%]{height:100vh}.chat-modal[_ngcontent-%COMP%]     .mat-mdc-menu-panel.mat-mdc-menu-panel{right:128px}.chat-modal[_ngcontent-%COMP%]     .mat-mdc-chip{border-radius:4px!important}.chat-modal[_ngcontent-%COMP%]     .mat-mdc-chip .mdc-evolution-chip__text-label{color:#fff!important}.chat-modal[_ngcontent-%COMP%]   .light-yellow[_ngcontent-%COMP%]{background:rgba(250,188,7,.2);color:#c0620ade}"]}),n})();var S=l(63900),U=l(28746),y=l(59549),$=l(39349),N=l(3238),V=l(31756);function B(n,i){1&n&&e.\u0275\u0275element(0,"new-rentals-loader")}let W=(()=>{class n{constructor(t,a,r){this.dialogRef=t,this.credentialsService=a,this.maintenanceFacadeService=r,this.maintenanceForm=new o.cw({}),this.requestType=m.bY,this.priorityEnum=m.Gu,this.loading=!1}ngOnInit(){this.buildForm()}buildForm(){this.maintenanceForm=new o.cw({requestTitle:new o.NI("",o.kI.required),descriptions:new o.NI("",o.kI.required),priority:new o.NI("",o.kI.required),requestType:new o.NI("",o.kI.required)})}closeDialog(){this.dialogRef.close()}createMaintenance(){this.loading=!0,this.maintenanceFacadeService.getCurrentUserDetails(this.credentialsService.currentUser().role_id).pipe((0,S.w)(({property:t,tenant:a})=>this.maintenanceFacadeService.createMaintenance(Object.assign(Object.assign({},this.maintenanceForm.value),{propertyId:t.id,tenantId:a.id}))),(0,U.x)(()=>{this.loading=!1,this.closeDialog()})).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(c.so),e.\u0275\u0275directiveInject(m.Cs),e.\u0275\u0275directiveInject(F))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["new-rentals-request-maintenance-modal"]],decls:41,vars:10,consts:[["fxLayout","row","fxLayoutAlign","space-between center"],["mat-dialog-title","",1,"mb-0"],[3,"click"],[1,"pull-right","white-color","font-size-20"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutAlign","space-between"],["appearance","outline","fxFlex","100","data-cy","title"],["matInput","","formControlName","requestTitle"],["appearance","outline","fxFlex","49","fxFlex.xs","100"],["formControlName","requestType"],[3,"value"],["formControlName","priority"],["fxFlex","100","appearance","outline",1,"text-area"],["matInput","","formControlName","descriptions","cdkTextareaAutosize","","cdkAutosizeMinRows","5","cdkAutosizeMaxRows","10"],[1,"full-width"],["fxLayoutAlign","end",1,"m-16"],["mat-button","","mat-stroked-button","","color","primary",1,"primary-border","mr-12",3,"click"],["mat-flat-button","","mat-button","","color","primary",3,"disabled","click"],[4,"ngIf"]],template:function(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",0)(1,"h2",1),e.\u0275\u0275text(2,"Request Maintenance"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"a",2),e.\u0275\u0275listener("click",function(){return a.closeDialog()}),e.\u0275\u0275elementStart(4,"mat-icon",3),e.\u0275\u0275text(5,"close"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"mat-dialog-content",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),e.\u0275\u0275text(10,"Request Title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"mat-form-field",8)(13,"mat-label"),e.\u0275\u0275text(14,"Maintenance Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"mat-select",9)(16,"mat-option",10),e.\u0275\u0275text(17," Immediate "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"mat-option",10),e.\u0275\u0275text(19," Planned "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"mat-form-field",8)(21,"mat-label"),e.\u0275\u0275text(22,"Priority"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"mat-select",11)(24,"mat-option",10),e.\u0275\u0275text(25," High "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"mat-option",10),e.\u0275\u0275text(27," Medium "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"mat-option",10),e.\u0275\u0275text(29," Low "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"mat-form-field",12)(31,"mat-label"),e.\u0275\u0275text(32,"Description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(33,"textarea",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(34,"hr",14),e.\u0275\u0275elementStart(35,"mat-dialog-actions",15)(36,"button",16),e.\u0275\u0275listener("click",function(){return a.closeDialog()}),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"button",17),e.\u0275\u0275listener("click",function(){return a.createMaintenance()}),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(40,B,1,0,"new-rentals-loader",18)),2&t&&(e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",a.maintenanceForm),e.\u0275\u0275advance(10),e.\u0275\u0275property("value",a.requestType.Immediate),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",a.requestType.Planned),e.\u0275\u0275advance(6),e.\u0275\u0275property("value",a.priorityEnum.High),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",a.priorityEnum.Medium),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",a.priorityEnum.Low),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate("cancel"),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",a.maintenanceForm.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate("Request Maintenance"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",a.loading))},dependencies:[M.O5,p.xw,p.Wh,p.yH,h.Hw,b.Nt,y.KE,y.hX,$.IC,C.gD,N.ey,x.lW,c.uh,c.xY,c.H8,o.Fj,o.JJ,o.JL,o.sg,o.u,V.R]}),n})(),K=(()=>{class n extends m._g{constructor(){super()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var d=(()=>{return(n=d||(d={})).MAINTENANCES="maintenances",n.MAINTENANCES_MAP="maintenancesMap",n.MAINTENANCE_FILTERS="maintenanceFilters",d;var n})(),T=l(18505),u=l(54004),f=l(50033);const G=f.Ps`
mutation createMaintenance($input: CreateMaintenanceInput!) {
  createMaintenance(input: $input){
    maintenance {
      id
    }
  }
}
`,Y=f.Ps`
  mutation ($input: OnHoldMaintenanceInput!) {
    onHoldMaintenance(input: $input){
      status
    }
  }
`,J=f.Ps`
  mutation ($input: ConfirmMaintenanceInput!) {
    confirmMaintenance(input: $input){
      status
    }
  }
`,X=f.Ps`
  mutation ($input: WorkMaintenanceInput!) {
    workMaintenance(input: $input){
      status
    }
  }
`,Q=f.Ps`
  mutation ($input: FinishMaintenanceInput!) {
    finishMaintenance(input: $input){
      status
    }
  }
`,Z=f.Ps`
  query maintenances ($attributes: MaintenanceFilterAttributes) {
    maintenances (attributes: $attributes) {
      descriptions
      id
      priority
      propertyId
      requestDate
      requestTitle
      requestType
      state
      tenantId
      property {
        id
        propertyName
      }
      tenant {
        user {
          profile {
            fullName
          }
        }
      }
    }
  }
`;let D=(()=>{class n{constructor(t,a){this.apollo=t,this.notificationService=a}createMaintenance(t){return this.apollo.mutate({mutation:G,variables:{input:{attributes:t}},fetchPolicy:"no-cache"}).pipe((0,T.b)(()=>this.notificationService.success("Maintenance ticket created successfully")),(0,u.U)(a=>a.data.maintenance))}getCurrentUserDetails(t){return this.apollo.query({query:m.zx,variables:{id:t},fetchPolicy:"no-cache"}).pipe((0,u.U)(a=>a.data.user))}getMaintenances(){return this.apollo.query({query:Z,variables:{},fetchPolicy:"no-cache"}).pipe((0,u.U)(t=>t.data.maintenances))}confirmMaintenance(t){return this.apollo.mutate({mutation:J,variables:{input:{id:t}},fetchPolicy:"no-cache"}).pipe((0,u.U)(a=>a.data.createMaintenance))}onHoldMaintenance(t){return this.apollo.mutate({mutation:Y,variables:{input:{id:t}},fetchPolicy:"no-cache"}).pipe((0,u.U)(a=>a.data.onHoldMaintenance))}workMaintenance(t){return this.apollo.mutate({mutation:X,variables:{input:{id:t}},fetchPolicy:"no-cache"}).pipe((0,u.U)(a=>a.data.workMaintenance))}finishMaintenance(t){return this.apollo.mutate({mutation:Q,variables:{input:{id:t}},fetchPolicy:"no-cache"}).pipe((0,u.U)(a=>a.data.finishMaintenance))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(f._M),e.\u0275\u0275inject(m.gq))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var P=l(69718);let ee=(()=>{class n{constructor(){}getMaintenanceStateMap(t){const a={open:{data:[],apiCall:"createTenant"},on_hold:{data:[],apiCall:"onHoldMaintenance"},in_progress:{data:[],openToInProgressApiCall:"workMaintenance",onHoldToInProgressApiCall:"confirmMaintenance"},completed:{data:[],apiCall:"finishMaintenance"}};return t.forEach(r=>a[r.state].data.push(r)),a}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),F=(()=>{class n extends m.Ud{constructor(t,a,r){super(t),this.maintenanceStateService=t,this.maintenanceApiService=a,this.maintenanceBlService=r}createMaintenance(t){return this.maintenanceApiService.createMaintenance(t).pipe((0,P.h)(!0))}getCurrentUserDetails(t){return this.maintenanceApiService.getCurrentUserDetails(t)}getMaintenances(){return this.maintenanceApiService.getMaintenances().pipe((0,T.b)(t=>{this.updateSpecificState(this.maintenanceBlService.getMaintenanceStateMap(t),d.MAINTENANCES_MAP)}),(0,P.h)(!0))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(K),e.\u0275\u0275inject(D),e.\u0275\u0275inject(ee))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=l(49933);const te={open:{data:[],apiCall:"createTenant"},on_hold:{data:[],apiCall:"createTenant"},in_progress:{data:[],apiCall:"createTenant"},completed:{data:[],apiCall:"createTenant"}};var ne=l(18246);function ae(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.openMaintenanceDetail())}),e.\u0275\u0275elementStart(1,"div",27)(2,"div")(3,"span",28),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span",29),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",30)(8,"mat-menu",null,31)(10,"span",32),e.\u0275\u0275element(11,"i",33),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13,"Edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"span",32),e.\u0275\u0275element(15,"i",34),e.\u0275\u0275elementStart(16,"span"),e.\u0275\u0275text(17,"Delete"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"mat-icon",35),e.\u0275\u0275listener("click",function(r){return r.stopPropagation()}),e.\u0275\u0275text(19,"more_horiz "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",36)(21,"div")(22,"p",37),e.\u0275\u0275text(23,"Property"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"p",38),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div")(27,"p",39),e.\u0275\u0275text(28,"Created On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"p",38),e.\u0275\u0275text(30,"23-23-2022"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"p",40),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",41)(34,"div",42),e.\u0275\u0275element(35,"img",43),e.\u0275\u0275elementStart(36,"span",38),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"mat-icon",44),e.\u0275\u0275text(39,"message"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=i.$implicit,a=e.\u0275\u0275reference(9);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(null==t?null:t.requestType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Priority: ",null==t?null:t.priority,""),e.\u0275\u0275advance(12),e.\u0275\u0275property("matMenuTriggerFor",a),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t.property?null:t.property.propertyName),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t?null:t.descriptions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t||null==t.tenant||null==t.tenant.user||null==t.tenant.user.profile?null:t.tenant.user.profile.fullName)}}function ie(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.openMaintenanceDetail())}),e.\u0275\u0275elementStart(1,"div",27)(2,"div")(3,"span",46),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span",47),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",30)(8,"mat-menu",null,31)(10,"span",32),e.\u0275\u0275element(11,"i",33),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13,"Edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"span",32),e.\u0275\u0275element(15,"i",34),e.\u0275\u0275elementStart(16,"span"),e.\u0275\u0275text(17,"Delete"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"mat-icon",35),e.\u0275\u0275listener("click",function(r){return r.stopPropagation()}),e.\u0275\u0275text(19,"more_horiz "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",36)(21,"div")(22,"p",37),e.\u0275\u0275text(23,"Property"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"p",38),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div")(27,"p",37),e.\u0275\u0275text(28,"Created On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"p",38),e.\u0275\u0275text(30,"23-23-2022"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"p",40),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",41)(34,"div",42),e.\u0275\u0275element(35,"img",43),e.\u0275\u0275elementStart(36,"span",38),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"mat-icon",48),e.\u0275\u0275text(39,"message"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=i.$implicit,a=e.\u0275\u0275reference(9);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(null==t?null:t.requestType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Priority: ",null==t?null:t.priority,""),e.\u0275\u0275advance(12),e.\u0275\u0275property("matMenuTriggerFor",a),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t.property?null:t.property.propertyName),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t?null:t.descriptions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t||null==t.tenant||null==t.tenant.user||null==t.tenant.user.profile?null:t.tenant.user.profile.fullName)}}function re(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.openMaintenanceDetail())}),e.\u0275\u0275elementStart(1,"div",27)(2,"div")(3,"span",28),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span",49),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",30)(8,"mat-menu",null,31)(10,"span",32),e.\u0275\u0275element(11,"i",33),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13,"Edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"span",32),e.\u0275\u0275element(15,"i",34),e.\u0275\u0275elementStart(16,"span"),e.\u0275\u0275text(17,"Delete"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"mat-icon",35),e.\u0275\u0275listener("click",function(r){return r.stopPropagation()}),e.\u0275\u0275text(19,"more_horiz "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",36)(21,"div")(22,"p",37),e.\u0275\u0275text(23,"Property"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"p",38),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div")(27,"p",39),e.\u0275\u0275text(28,"Created On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"p",38),e.\u0275\u0275text(30,"23-23-2022"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"p",40),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",41)(34,"div",42),e.\u0275\u0275element(35,"img",43),e.\u0275\u0275elementStart(36,"span",38),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"mat-icon",48),e.\u0275\u0275text(39,"message"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=i.$implicit,a=e.\u0275\u0275reference(9);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(null==t?null:t.requestType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("priority: ",null==t?null:t.priority,""),e.\u0275\u0275advance(12),e.\u0275\u0275property("matMenuTriggerFor",a),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t.property?null:t.property.propertyName),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t?null:t.descriptions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t||null==t.tenant||null==t.tenant.user||null==t.tenant.user.profile?null:t.tenant.user.profile.fullName)}}function le(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.openMaintenanceDetail())}),e.\u0275\u0275elementStart(1,"div",27)(2,"div")(3,"span",28),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span",29),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",30)(8,"mat-menu",null,31)(10,"span",32),e.\u0275\u0275element(11,"i",33),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13,"Edit"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"span",32),e.\u0275\u0275element(15,"i",34),e.\u0275\u0275elementStart(16,"span"),e.\u0275\u0275text(17,"Delete"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"mat-icon",35),e.\u0275\u0275listener("click",function(r){return r.stopPropagation()}),e.\u0275\u0275text(19,"more_horiz "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(20,"div",36)(21,"div")(22,"p",37),e.\u0275\u0275text(23,"Property"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"p",38),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div")(27,"p",39),e.\u0275\u0275text(28,"Created On"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"p",38),e.\u0275\u0275text(30,"23-23-2022"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"p",40),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",41)(34,"div",42),e.\u0275\u0275element(35,"img",43),e.\u0275\u0275elementStart(36,"span",38),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"mat-icon",48),e.\u0275\u0275text(39,"message"),e.\u0275\u0275elementEnd()()()}if(2&n){const t=i.$implicit,a=e.\u0275\u0275reference(9);e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(null==t?null:t.requestType),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Priority: ",null==t?null:t.priority,""),e.\u0275\u0275advance(12),e.\u0275\u0275property("matMenuTriggerFor",a),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t.property?null:t.property.propertyName),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t?null:t.descriptions),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t||null==t.tenant||null==t.tenant.user||null==t.tenant.user.profile?null:t.tenant.user.profile.fullName)}}const oe=function(){return[2]},ce=function(n,i){return[n,i]},O=function(n){return[n]},me=function(){return[]};let v=class{constructor(i,t,a){this.matDialog=i,this.maintenanceFacadeService=t,this.maintenanceApiService=a,this.maintenancesMap=te,this.priorityTypeEnum=m.Gu,this.requestTypeEnum=m.bY}drop(i){if(i.previousContainer===i.container)(0,g.bA)(i.container.data,i.previousIndex,i.currentIndex);else{const t=i.previousContainer.data[i.previousIndex];["in_progress"].includes(i.container.id)?this.maintenanceApiService["open"===i.previousContainer.id?this.maintenancesMap[i.container.id].openToInProgressApiCall:this.maintenancesMap[i.container.id].onHoldToInProgressApiCall](t.id).pipe((0,S.w)(()=>this.maintenanceFacadeService.getMaintenances())).subscribe():this.maintenanceApiService[this.maintenancesMap[i.container.id].apiCall](t.id).pipe((0,S.w)(()=>this.maintenanceFacadeService.getMaintenances())).subscribe(),(0,g.EA)(i.previousContainer.data,i.container.data,i.previousIndex,i.currentIndex)}}ngOnInit(){this.updateMaintenanceFilters(),this.listenToMaintenanceFilters(),this.listenToMaintenancesMapState()}updateMaintenanceFilters(){this.maintenanceFacadeService.updateSpecificState({},d.MAINTENANCE_FILTERS)}listenToMaintenanceFilters(){this.maintenanceFacadeService.specificStateChange(d.MAINTENANCE_FILTERS).pipe((0,_.t)(this),(0,S.w)(i=>this.maintenanceFacadeService.getMaintenances())).subscribe()}listenToMaintenancesMapState(){this.maintenanceFacadeService.specificStateChange(d.MAINTENANCES_MAP).pipe((0,_.t)(this),(0,T.b)(i=>{this.maintenancesMap=i})).subscribe()}openMaintenanceDetail(){this.matDialog.open(q,{panelClass:["modal-sm","full-width-modal","common-chat-modal"],position:{right:"0",top:"0",bottom:"0"},data:{}})}openMaintenanceRequest(){this.matDialog.open(W,{panelClass:["modal-sm","full-width-modal"],data:{}})}};v.\u0275fac=function(i){return new(i||v)(e.\u0275\u0275directiveInject(c.uw),e.\u0275\u0275directiveInject(F),e.\u0275\u0275directiveInject(D))},v.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["new-rentals-maintenance-list"]],decls:68,vars:36,consts:[["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"mx-24","mt-24","application-container"],["fxLayout","row wrap","fxFlex","80","fxLayoutAlign","start start","fxLayoutGap","12px"],["appearance","outline","fxFlex","40",1,"search-field"],["matPrefix","",1,"pi","pi-search","s-16","mb-4","py-8","pr-8","pl-12","primary-color"],["type","text","matInput","","placeholder","Search customer or category","autocomplete","off","data-cy","search"],["fxFlex","20","appearance","outline",1,"pull-right"],["matPrefix","",1,"boulder-color"],[3,"value"],["mat-flat-button","","mat-button","","color","primary","fxFlex","16",1,"mt-8","mb-20",3,"newRentalsAuthorized","click"],["fxLayout","row","fxLayoutAlign","space-between",1,"mx-24","mb-24","mt-8"],["fxFlex","24",1,"example-container"],["cdkDropList","",1,"example-list",3,"cdkDropListData","id","cdkDropListConnectedTo","cdkDropListDropped"],["openList","cdkDropList"],["fxLayoutAlign","space-between center",1,"card-title","nr-white-bg","br-4","p-12","m-16"],[1,"my-0"],[1,"primary-bg","py-4","px-8","br-4","nr-white-color"],["fxLayout","column","class","example-box m-16 px-16 pb-16 br-4 hand-cursor","cdkDrag","",3,"click",4,"ngFor","ngForOf"],["cdkDropList","",1,"example-list",3,"cdkDropListData","cdkDropListConnectedTo","id","cdkDropListDropped"],["onholdList","cdkDropList"],["fxLayoutAlign","space-between center",1,"nr-white-bg","br-4","p-12","m-16"],[1,"green-dragonfly-bg","py-4","px-8","br-4","nr-white-color"],["fxLayout","column","class","example-box m-16 px-16 pb-16 br-4","cdkDrag","",3,"click",4,"ngFor","ngForOf"],["inprogressList","cdkDropList"],[1,"purple-bg","py-4","px-8","br-4","nr-white-color"],["completedList","cdkDropList"],[1,"success-bg","py-4","px-8","br-4","nr-white-color"],["fxLayout","column","cdkDrag","",1,"example-box","m-16","px-16","pb-16","br-4","hand-cursor",3,"click"],["fxLayoutAlign","space-between center",1,"border-bottom"],[1,"chip--planned","br-4","py-8","px-12","font-size-12","mr-8"],[1,"chip--priority-high","br-4","py-8","px-12","font-size-12"],[1,"mt-16","mb-12"],["menu","matMenu"],["mat-menu-item",""],[1,"pi","pi-pencil","mr-8","s-12","boulder-color"],[1,"pi","pi-trash","mr-8","s-12","boulder-color"],[1,"hand-cursor","boulder-color",3,"matMenuTriggerFor","click"],["fxLayoutAlign","space-between center",1,"mt-16"],[1,"boulder-color","mb-4","font-size-12"],[1,"font-size-12"],[1,"boulder-color","font-size-12","mb-4"],[1,"font-size-12","text-truncate"],["fxLayoutAlign","space-between center",1,"nr-white-fade-bg","br-4","px-12"],["fxLayoutAlign","center center"],["src","../assets/images/user.svg",1,"user-profile-36","my-8","mr-8"],["matBadge","5","matBadgeSize","small",1,"boulder-color","mt-8","mr-12"],["fxLayout","column","cdkDrag","",1,"example-box","m-16","px-16","pb-16","br-4",3,"click"],[1,"chip--corrective","br-4","py-8","px-12","font-size-12","mr-8"],[1,"chip--priority-medium","br-4","py-8","px-12","font-size-12"],[1,"boulder-color"],[1,"chip--priority-low","br-4","py-8","px-12","font-size-12"]],template:function(i,t){if(1&i&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-form-field",2),e.\u0275\u0275element(3,"i",3)(4,"input",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-form-field",5)(6,"mat-icon",6),e.\u0275\u0275text(7,"filter_3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"mat-label"),e.\u0275\u0275text(9,"Priority"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-select")(11,"mat-option",7),e.\u0275\u0275text(12,"High"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-option",7),e.\u0275\u0275text(14,"Medium"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"mat-option",7),e.\u0275\u0275text(16,"Low"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"mat-form-field",5)(18,"mat-icon",6),e.\u0275\u0275text(19,"filter_3"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"mat-label"),e.\u0275\u0275text(21,"Request Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"mat-select")(23,"mat-option",7),e.\u0275\u0275text(24,"Planed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"mat-option",7),e.\u0275\u0275text(26,"Immediate"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(27,"button",8),e.\u0275\u0275listener("click",function(){return t.openMaintenanceRequest()}),e.\u0275\u0275elementStart(28,"mat-icon"),e.\u0275\u0275text(29,"add"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",9)(32,"div",10)(33,"div",11,12),e.\u0275\u0275listener("cdkDropListDropped",function(r){return t.drop(r)}),e.\u0275\u0275elementStart(35,"div",13)(36,"h3",14),e.\u0275\u0275text(37,"Open"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"span",15),e.\u0275\u0275text(39),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(40,ae,40,6,"div",16),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"div",10)(42,"div",17,18),e.\u0275\u0275listener("cdkDropListDropped",function(r){return t.drop(r)}),e.\u0275\u0275elementStart(44,"div",19)(45,"h3",14),e.\u0275\u0275text(46,"On Hold"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"span",20),e.\u0275\u0275text(48),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(49,ie,40,6,"div",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"div",10)(51,"div",17,22),e.\u0275\u0275listener("cdkDropListDropped",function(r){return t.drop(r)}),e.\u0275\u0275elementStart(53,"div",19)(54,"h3",14),e.\u0275\u0275text(55,"In Progress"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"span",23),e.\u0275\u0275text(57),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(58,re,40,6,"div",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",10)(60,"div",17,24),e.\u0275\u0275listener("cdkDropListDropped",function(r){return t.drop(r)}),e.\u0275\u0275elementStart(62,"div",19)(63,"h3",14),e.\u0275\u0275text(64,"Completed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"span",25),e.\u0275\u0275text(66),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(67,le,40,6,"div",21),e.\u0275\u0275elementEnd()()()),2&i){const a=e.\u0275\u0275reference(43),r=e.\u0275\u0275reference(52),ue=e.\u0275\u0275reference(61);e.\u0275\u0275advance(11),e.\u0275\u0275property("value",t.priorityTypeEnum.High),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",t.priorityTypeEnum.Medium),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",t.priorityTypeEnum.Low),e.\u0275\u0275advance(8),e.\u0275\u0275property("value",t.requestTypeEnum.Planned),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",t.requestTypeEnum.Immediate),e.\u0275\u0275advance(2),e.\u0275\u0275property("newRentalsAuthorized",e.\u0275\u0275pureFunction0(27,oe)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ","Request Maintenance",""),e.\u0275\u0275advance(3),e.\u0275\u0275property("cdkDropListData",null==t.maintenancesMap||null==t.maintenancesMap.open?null:t.maintenancesMap.open.data)("id","open")("cdkDropListConnectedTo",e.\u0275\u0275pureFunction2(28,ce,a,r)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(null==t.maintenancesMap||null==t.maintenancesMap.open?null:t.maintenancesMap.open.data.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==t.maintenancesMap||null==t.maintenancesMap.open?null:t.maintenancesMap.open.data),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdkDropListData",null==t.maintenancesMap||null==t.maintenancesMap.on_hold?null:t.maintenancesMap.on_hold.data)("cdkDropListConnectedTo",e.\u0275\u0275pureFunction1(31,O,r))("id","on_hold"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(null==t.maintenancesMap||null==t.maintenancesMap.on_hold?null:t.maintenancesMap.on_hold.data.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==t.maintenancesMap||null==t.maintenancesMap.on_hold?null:t.maintenancesMap.on_hold.data),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdkDropListData",null==t.maintenancesMap||null==t.maintenancesMap.in_progress?null:t.maintenancesMap.in_progress.data)("cdkDropListConnectedTo",e.\u0275\u0275pureFunction1(33,O,ue))("id","in_progress"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(null==t.maintenancesMap||null==t.maintenancesMap.in_progress?null:t.maintenancesMap.in_progress.data.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==t.maintenancesMap||null==t.maintenancesMap.in_progress?null:t.maintenancesMap.in_progress.data),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdkDropListData",null==t.maintenancesMap||null==t.maintenancesMap.completed?null:t.maintenancesMap.completed.data)("cdkDropListConnectedTo",e.\u0275\u0275pureFunction0(35,me))("id","completed"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(null==t.maintenancesMap||null==t.maintenancesMap.completed?null:t.maintenancesMap.completed.data.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==t.maintenancesMap||null==t.maintenancesMap.completed?null:t.maintenancesMap.completed.data)}},dependencies:[M.sg,p.xw,p.SQ,p.Wh,p.yH,h.Hw,g.Wj,g.Zt,b.Nt,y.KE,y.hX,y.qo,C.gD,N.ey,x.lW,w.k,s.VK,s.OP,s.p6,ne.j],styles:[".chip--planned[_ngcontent-%COMP%]{color:#116c6f;background:#E9FDFE}.chip--priority-medium[_ngcontent-%COMP%]{color:#c0620ade;background:rgba(250,188,7,.12)}.chip--priority-high[_ngcontent-%COMP%]{color:#c63733;background:rgba(220,53,69,.16)}.chip--priority-low[_ngcontent-%COMP%]{color:#5d5fef;background:rgba(165,166,246,.25)}.chip--corrective[_ngcontent-%COMP%]{color:#1b8ece;background:#E8EFFB}"]}),v=(0,k.gn)([(0,_.c)(),(0,k.w6)("design:paramtypes",[c.uw,F,D])],v);const pe=[R.no.childRoutes([{path:"",component:z,canActivate:[],data:{breadCrumb:"maintenance"},children:[{path:"",component:v}]}])];let se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[M.ez,E.Bz.forChild(pe),H]}),n})(),de=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[M.ez,se]}),n})()}}]);